<!DOCTYPE html>
<html>
<head>
	<title>Covid 19 Daily Data</title>


	<!-- public/index.html-->

	<!-- Add Bootstrap and Bootstrap-Vue CSS to the <head> section -->
	<link type="text/css" rel="stylesheet" href="https://unpkg.com/bootstrap/dist/css/bootstrap.min.css"/>
	<link type="text/css" rel="stylesheet" href="https://unpkg.com/bootstrap-vue@latest/dist/bootstrap-vue.min.css"/>

	<!-- Add Vue and BootstrapVue scripts just before the closing </body> tag -->
	<script src="https://unpkg.com/vue/dist/vue.min.js"></script>
	<script src="https://unpkg.com/bootstrap-vue@latest/dist/bootstrap-vue.min.js"></script>

	<script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.19.2/axios.js" integrity="sha256-bd8XIKzrtyJ1O5Sh3Xp3GiuMIzWC42ZekvrMMD4GxRg=" crossorigin="anonymous"></script>


</head>
<body>

	<div id="app" class="container">
		<h1>The Sad Times</h1>

		  <div>
		    <b-table striped hover :items="countries"></b-table>
		  </div>


		
	</div>

<script type="text/javascript" >
	Vue.use(BootstrapVue)
	Vue.config.productionTip = false

	var app = new Vue({
	  el: '#app',
	  data: {
	    message: 'Hello Vue!',
	    source: {},
	    countries: {
		    uk: {
		    	name: "United Kingdom",
		    	data: null,
		    	ground_zero: 43
		    },
		    france: {
		    	name: "France",
		    	data: null,
		    	ground_zero: 24
		    },
		    spain: {
		    	name: "Spain",
		    	data: null,
		    	ground_zero: 41
		    },
		    italy: {
		    	name: "Italy",
		    	data: null,
		    	ground_zero: 30
		    }
	    }
	  },

	  created: function() {
	  	var that = this;

	  	var alldata = {};
	  	axios.get("https://pomber.github.io/covid19/timeseries.json")
		  .then(function (response) {
		    // handle success
		    // var alldata = response.data;
		    that.source = response.data;
		    // console.log(response);
		  })
		  .catch(function (error) {
		    // handle error
		    console.log(error);
		  })
		  .then(function () {
		    // always executed

    	  	console.log("source", that.source);
		  	
		  	that.countries.uk.data = that.source["United Kingdom"];
    	  	that.countries.france.data = that.source["France"];
    	  	that.countries.spain.data = that.source["Spain"];


    	  	that.countries.uk.data = that.source["United Kingdom"].slice(that.countries.uk.ground_zero, that.source["United Kingdom"].length);
    	  	
    	  	that.countries.france.data = that.source["France"].slice(that.countries.france.ground_zero, that.source["France"].length);

    	  	that.countries.spain.data = that.source["Spain"].slice(that.countries.spain.ground_zero, that.source["Spain"].length);

    	  	that.countries.italy.data = that.source["Italy"].slice(that.countries.italy.ground_zero, that.source["Italy"].length);

    	  	console.log("countries", that.countries);

		  });

	  },

	  mounted: function() {
	  	var that = this;
	  }

	})	

	let alldata;
	axios.get("https://pomber.github.io/covid19/timeseries.json")
	  .then(function (response) {
	    // handle success
	    alldata = response.data;
	    console.log(response);
	  })
	  .catch(function (error) {
	    // handle error
	    console.log(error);
	  })
	  .then(function () {
	    // always executed
	  });

</script>

</body>
</html>